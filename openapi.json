{"openapi":"3.1.0","info":{"title":"milky-blog-service","description":"","license":{"name":""},"version":"0.1.0"},"paths":{"/api/articles":{"get":{"tags":["articles"],"summary":"Find articles by criteria.","description":"Find articles by criteria specified in query parameters. Api will return\na list of found `Article` objects.","operationId":"find_article","parameters":[{"name":"page","in":"query","required":true,"schema":{"type":"integer","format":"int32","default":1,"minimum":0},"example":1},{"name":"per_page","in":"query","required":true,"schema":{"type":"integer","format":"int32","default":10,"minimum":0},"example":10},{"name":"query","in":"query","required":false,"schema":{"type":["string","null"]}},{"name":"tags","in":"query","required":false,"schema":{"type":"array","items":{"type":"string","format":"uuid"}},"example":["8d784bcd-2984-4c58-bd8b-331e7e8a31bd"]},{"name":"state","in":"query","required":true,"schema":{"$ref":"#/components/schemas/ArticleState"}},{"name":"order_by","in":"query","required":true,"schema":{"type":"string"},"example":"CreatedAtDesc"},{"name":"author_id","in":"query","required":false,"schema":{"type":["string","null"],"format":"uuid"},"example":"bf8b2986-956d-4aff-8722-1650cc2b59a3"}],"responses":{"200":{"description":"Article list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindArticleOutput"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}}}},"post":{"tags":["articles"],"summary":"Create new article.","description":"Post a new `Article` in request body as json to store it. Api will return\ncreated `ArticleId`\n\n","operationId":"create_article","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateArticleInput"}}},"required":true},"responses":{"201":{"description":"Successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateArticleOutput"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"title","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}}}}},"/api/articles/files":{"post":{"tags":["article files"],"summary":"Create new article file.","description":"Post a new `ArticleFile` in request body as json to store it. Api will return\ncreated `FileId` of the article file.\n\n","operationId":"create_article_file","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"example":"89e4967c-be4c-48ff-b330-89f8e657d109"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateArticleFileInput"}}},"required":true},"responses":{"204":{"description":"Successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreSignedUrl"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"filename","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"Article not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"article_id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}}},"/api/articles/files/{id}":{"delete":{"tags":["article files"],"summary":"Delete article file by id.","description":"Delete an `ArticleFile` by its `FileId`. Api will return deleted\n`FileId`.\n\n","operationId":"delete_article_file","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"example":"95c9e598-3827-4bc2-b552-f6ad94c884d3"}],"responses":{"204":{"description":"Successfully deleted","content":{"application/json":{"schema":{"default":null},"example":{}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"File not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}}},"/api/articles/files/{id}/confirm":{"post":{"tags":["article files"],"summary":"Confirm article file by id.","description":"Confirm an `ArticleFile` by its `FileId`. Api will return confirmed\n`ArticleFile`.","operationId":"confirm_article_file","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"example":"4ac53040-602f-416c-a8cc-3b16a821a8ad"}],"responses":{"204":{"description":"Successfully confirmed","content":{"application/json":{"schema":{"default":null},"example":{}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"FileId not found or file not uploaded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}}},"/api/articles/rate/{id}/{state}":{"post":{"tags":["articles"],"summary":"Rate article by id.","description":"Rate an `Article` by its `ArticleId` and `RateState`. Api will return\nupdated `Article` with new rating state.\n\n","operationId":"rate_article","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"example":"eb491b81-7497-4370-a680-29940fc223ee"},{"name":"state","in":"path","required":true,"schema":{"$ref":"#/components/schemas/RateState"}}],"responses":{"204":{"description":"Successfully rated","content":{"application/json":{"schema":{"default":null},"example":{}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"Article not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}}},"/api/articles/tags":{"get":{"tags":["article tags"],"summary":"Find article tags by criteria.","description":"Find article tags by criteria specified in query parameters. Api will return\na list of found `Tag` objects.","operationId":"find_article_tags","parameters":[{"name":"page","in":"query","required":true,"schema":{"type":"integer","format":"int32","default":1,"minimum":0},"example":1},{"name":"per_page","in":"query","required":true,"schema":{"type":"integer","format":"int32","default":10,"minimum":0},"example":10},{"name":"query","in":"query","required":false,"schema":{"type":["string","null"]},"example":"rust"},{"name":"order_by","in":"query","required":true,"schema":{"type":"string"},"example":"ArticleCountDesc"}],"responses":{"204":{"description":"Successfully deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindArticleTagsOutput"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"page","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}}}}},"/api/articles/{id}":{"get":{"tags":["articles"],"summary":"Get article by id.","description":"Get an `Article` by its `ArticleId`. Api will return found `Article`.\n\n","operationId":"get_article","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"example":"eee55180-fe7b-4b23-8332-9efd2bef3273"}],"responses":{"200":{"description":"Successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetArticleOutput"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"Article not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}},"put":{"tags":["articles"],"summary":"Update an existing article.","description":"Update an `Article` by its `ArticleId`. Api will return updated `Article`.\n\n","operationId":"update_article","parameters":[{"name":"id","in":"path","description":"article id","required":true,"schema":{"type":"string","format":"uuid"},"example":"ed55827d-be41-47b5-9345-e1499ced25cf"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateArticleInput"}}},"required":true},"responses":{"200":{"description":"Successfully updated","content":{"application/json":{"schema":{"default":null},"example":null}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"Article or new poster not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}},"delete":{"tags":["articles"],"summary":"Delete article by id.","description":"Delete an `Article` by its `ArticleId`. Api will return deleted `ArticleId`.\n\n","operationId":"delete_article","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"example":"85a9c21f-7795-4cbf-840a-67bd5c5f71ca"}],"responses":{"204":{"description":"Successfully deleted","content":{"application/json":{"schema":{"default":null},"example":{}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"INVALID_EMPTY"}],"status":"VALIDATION"}}}},"401":{"description":"Token expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"TOKEN_EXPIRED"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[],"status":"ACCESS_DENIED"}}}},"404":{"description":"Article not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpErrorModel"},"example":{"details":[{"attrs":[],"field":"id","reason":"NOT_FOUND"}],"status":"NOT_FOUND"}}}}}}}},"components":{"schemas":{"ArticleFile":{"type":"object","required":["id","filename","content_type","url","created_at"],"properties":{"content_type":{"type":"string","example":"image/png"},"created_at":{"type":"string","format":"date-time"},"filename":{"type":"string","example":"example.png"},"id":{"type":"string","format":"uuid","example":"c9bb921f-e2a6-4f64-ae89-4748d73d9c54"},"updated_at":{"type":["string","null"],"format":"date-time"},"url":{"type":"string","example":"https://s3.example.com/article-assets/987e9dc9-d84c-4ba7-837f-db755a0fdc55/80bbc0bc-4064-420a-b4ed-4f94b4575321"}}},"ArticleItem":{"type":"object","required":["id","title","state","views","rating","author_id","tags","self_rate","created_at"],"properties":{"author_id":{"type":"string","format":"uuid","example":"06066b31-a0d0-4705-99e7-8ae5ef96e25e"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid","example":"7d2add71-75d6-4b8a-9395-668125efc4d1"},"poster_url":{"type":["string","null"],"example":"https://s3.example.com/article-assets/987e9dc9-d84c-4ba7-837f-db755a0fdc55/80bbc0bc-4064-420a-b4ed-4f94b4575321"},"rating":{"type":"integer","format":"int64","example":97},"self_rate":{"$ref":"#/components/schemas/RateState"},"state":{"$ref":"#/components/schemas/ArticleState"},"tags":{"type":"array","items":{"$ref":"#/components/schemas/Tag"}},"title":{"type":"string","example":"Super javascript tips"},"updated_at":{"type":["string","null"],"format":"date-time"},"views":{"type":"integer","format":"int32","example":100,"minimum":0}}},"ArticleState":{"type":"string","enum":["Draft","Published","Archived"]},"CreateArticleFileInput":{"type":"object","required":["article_id","filename","content_type"],"properties":{"article_id":{"type":"string","format":"uuid","example":"af1501a9-0d4b-4a4f-9241-b2b4203e201d"},"content_type":{"type":"string","example":"image/png"},"filename":{"type":"string","example":"example.png"}}},"CreateArticleInput":{"type":"object","required":["title","content","state","tags"],"properties":{"content":{"type":"string","example":"In this article, we will explore some of the best practices in Rust programming..."},"state":{"$ref":"#/components/schemas/ArticleState","description":"When creating, it is better to use Draft"},"tags":{"type":"array","items":{"type":"string"},"example":["rust","programming","tips"]},"title":{"type":"string","example":"Super rust tips"}}},"CreateArticleOutput":{"type":"object","required":["id"],"properties":{"id":{"type":"string","format":"uuid","example":"9bf6b701-4231-49cc-85a6-fc6da9d6194c"}}},"FindArticleOutput":{"type":"array","items":{"$ref":"#/components/schemas/ArticleItem"}},"FindArticleTagsOutput":{"type":"array","items":{"$ref":"#/components/schemas/TagItem"}},"GetArticleOutput":{"type":"object","required":["title","content","state","views","rating","author_id","tags","self_rate","files","created_at"],"properties":{"author_id":{"type":"string","format":"uuid","example":"40ab7bb3-a791-4ac0-9d0d-2d208944f069"},"content":{"type":"string","example":"In this article, we will explore some of the best practices in Rust programming..."},"created_at":{"type":"string","format":"date-time"},"files":{"type":"array","items":{"$ref":"#/components/schemas/ArticleFile"}},"poster":{"type":["string","null"],"format":"uuid","example":"6aee0f58-07ba-448a-887e-4ac55e86f115"},"rating":{"type":"integer","format":"int64","example":-5},"self_rate":{"$ref":"#/components/schemas/RateState"},"state":{"$ref":"#/components/schemas/ArticleState"},"tags":{"type":"array","items":{"type":"string"},"example":["rust","programming","tips"]},"title":{"type":"string","example":"Super rust tips"},"updated_at":{"type":["string","null"],"format":"date-time"},"views":{"type":"integer","format":"int32","example":100,"minimum":0}}},"HttpErrorDetail":{"type":"object","required":["field","reason","attrs"],"properties":{"attrs":{"type":"array","items":{}},"field":{"type":"string","example":"id"},"reason":{"type":"string","example":"NOT_FOUND"}}},"HttpErrorModel":{"type":"object","required":["status","details"],"properties":{"details":{"type":"array","items":{"$ref":"#/components/schemas/HttpErrorDetail"}},"status":{"type":"string","example":"NOT_FOUND"}}},"PreSignedUrl":{"type":"object","required":["url","fields"],"properties":{"fields":{"type":"object","additionalProperties":{"type":"string"},"propertyNames":{"type":"string"}},"url":{"type":"string","example":"https://s3.example.com/article-assets/987e9dc9-d84c-4ba7-837f-db755a0fdc55/80bbc0bc-4064-420a-b4ed-4f94b4575321"}}},"RateState":{"type":"string","enum":["up","neutral","down"]},"Tag":{"type":"object","required":["id","title","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid","example":"beb7c371-e90c-4d11-95c0-1dd25826615c"},"title":{"type":"string","example":"rust","maxLength":64,"minLength":2}}},"TagItem":{"type":"object","required":["id","title","article_count","created_at"],"properties":{"article_count":{"type":"integer","format":"int32","description":"The number of articles associated with this tag","example":42,"minimum":0},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid","example":"8261cf6f-c305-447e-a6a3-a5156f1a9e82"},"title":{"type":"string","example":"rust"}}},"UpdateArticleInput":{"type":"object","description":"Update article by id.\n\nUpdate an `Article` by its `ArticleId`. Api will return updated `Article`.\n","required":["title","content","state","tags"],"properties":{"content":{"type":"string","example":"This is the content of the article."},"poster":{"type":["string","null"],"format":"uuid","example":"e8f1ea49-c525-4f9b-924c-454a87d20e60"},"state":{"$ref":"#/components/schemas/ArticleState"},"tags":{"type":"array","items":{"type":"string"},"example":["js","programming","tips"]},"title":{"type":"string","example":"Updated article title"}}}}},"tags":[{"name":"articles","description":"Article management endpoints."},{"name":"article files","description":"Article file management endpoints."},{"name":"article tags","description":"Article tag management endpoints."}]}